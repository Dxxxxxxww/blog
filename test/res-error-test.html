<!DOCTYPE html>
<html>
  <head>
    <title>Test page in http://test.com</title>
  </head>
  <body>
    <script>
      // window.onerror = function () {
      //   console.log('onerror====', arguments)
      // }

      window.addEventListener(
        'error',
        function () {
          console.log('arguments====', arguments)
        },
        true
      )
    </script>
    <!-- 测试 src 资源加载错误 -->
    <script src="https://yun.dui8899.com/tuia/cdn/remote/testerror.js"></script>
    <!-- 测试 img 资源加载错误 -->
    <!-- 测试结果，与 script 一致 -->
    <img src="https://yun.dui8899.com/tuia/cdn/remote/testerror.jpeg" alt="" />
    <!-- 测试 css 资源加载错误 -->
    <!-- 测试结果，与 script 一致 -->
    <link
      rel="stylesheet"
      href="https://yun.dui8899.com/tuia/cdn/remote/testerror.css"
    />
    <script>
      // 也能捕获到 js 执行错误，但是不会拦截控制台报错输出
      // ReferenceError
      // a.b
      // TypeError
      // const person = void 0
      // person.name
      // RangeError 栈溢出
      ;(function fn() {
        fn()
      })()

      // SyntaxError
      // const xxx
    </script>
    结论：addEventListener 来注册 error，返回结构都是相同的
  </body>
</html>
