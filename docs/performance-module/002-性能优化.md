# 性能优化

性能优化通常分为两个部分

1. 构建性能优化：面向开发，优化开发体验；
2. 运行时性能优化：面向客户，优化用户体验。

## 性能优化指标

在性能优化关键指标方面，目前主要集中在加载方面，特别是白屏时间和首屏时间。在采集方式上，除了手动采集之外，还可以自动化采集。而交互性和视觉稳定性关键指标，业界还在探索，没有统一的衡量标准，且必须手动采集。

## 加载方面

白屏时间(标准时长 300ms)：指的是从输入网址到页面刚呈现内容的时间。包括 DNS 查询、建立 TCP 连接、发送首个 HTTP 请求(如果使用 HTTPS 还要介入 TLS 的验证时间)，返回 HTML 文档，HTML 文档 Head 解析完毕。

影响白屏的因素：

1. 有可能是 DNS 查询时间长；
2. 建立 TCP 请求链接太慢；
3. 或者是服务器处理请求速度太慢；
4. 客户端下载、解析、渲染时长过长；
5. 没有做 Gzip 压缩；
6. 缺乏本地离线化处理。
7. ……

---

首屏时间 = 白屏时间 + 渲染时间。指的是从输入网址到页面内容渲染完成的时间。

## 交互方面

-   FID(First Input Delay，首次输入延迟)：标准是必须小于 100ms。
-   PSI(Perceptual Speed Index，视觉变化率)：标准是小于 20%。
