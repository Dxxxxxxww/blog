# 002 手写之二 call apply bind

## call

```js
// es3
Function.prototype.call3 = function() {
  const context = arguments[0],
    args = []
  context.fn = this

  for (let i = 1; i < arguments.length; i++) {
    args.push(`arguments[${i}]`)
  }
  // 使用 eval 是为了将参数展开
  const result = eval(`context.fn(${args})`)
  delete context.fn
  return result
}

// es6
Function.prototype.call6 = function(context, ...args) {
  context.fn = this
  // es6 可以直接使用 rest参数，会自动展开参数
  const result = context.fn(...args)
  delete context.fn
  return result
}

const a = 10,
  obj = {
    a: 1,
    b: {
      c: 'ccc',
    },
  }
function test(p1, p2, p3) {
  return `${this.a} + ${this.b.c} + ${p1} + ${p2} + ${p3}`
}
console.log(test.call3(obj, 1, 2, 'c')) // 1 + ccc + 1 + 2 + c
console.log(test.call6(obj, 1, 2, 'c')) // 1 + ccc + 1 + 2 + c
```

## apply

```js
// es3
Function.prototype.apply3 = function(context, args) {
  const params = []
  context.fn = this

  for (let i = 0; i < args.length; i++) {
    params.push(`args[${i}]`)
  }
  const result = eval(`context.fn(${params})`)
  delete context.fn
  return result
}

// es6
Function.prototype.apply6 = function(context, args) {
  context.fn = this
  const result = context.fn(...args)
  delete context.fn
  return result
}

const a = 10,
  obj = {
    a: 1,
    b: {
      c: 'ccc',
    },
  }
function test(p1, p2, p3) {
  return `${this.a} + ${this.b.c} + ${p1} + ${p2} + ${p3}`
}
console.log(test.apply3(obj, [1, 2, 'c'])) // 1 + ccc + 1 + 2 + c
console.log(test.apply6(obj, [1, 2, 'c'])) // 1 + ccc + 1 + 2 + c
```

## bind
